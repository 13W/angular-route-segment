<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="angular-route-segment : An extension for AngularJS $route service which supports tree-like nested views and routes hierarchy, and advanced flow handling." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>angular-route-segment</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/artch/angular-route-segment">View on GitHub</a>

          <h1 id="project_title">angular-route-segment</h1>
          <h2 id="project_tagline">An extension for AngularJS $route service which supports tree-like nested views and routes hierarchy, and advanced flow handling.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/artch/angular-route-segment/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/artch/angular-route-segment/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>Example site is located here: </p>

<blockquote>
<p><a href="http://angular-route-segment.com/src/example/"><strong>DEMO SITE</strong></a></p>
</blockquote>

<p>The sources of this example can be found in the folder <a href="https://github.com/artch/angular-route-segment/tree/master/example">/example</a>.</p>

<p>You can install the library via <a href="http://bower.io/">Bower</a>:</p>

<pre><code>bower install angular-route-segment
</code></pre>

<p>Tested with AngularJS 1.1.5 and 1.2.0rc1 (you must include <code>ngRoute</code> module in 1.2.x!).</p>

<h2>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>This library is intended to provide the lacking functionality of nested routing to AngularJS applications. It is widely known, there are no ways to keep the page state unchanged when only a part of it should be updated via routing mechanics - the <code>$route</code> service re-creates the whole scope after a route is changed, losing its state completely. <strong>route-segment</strong> gives you a way to handle this.</p>

<p>The library provides two pieces of code: <code>$routeSegment</code> service and <code>app-view-segment</code> directive. Both are placed in their own modules which you must include as dependencies in your app module:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngRoute'</span><span class="p">,</span> <span class="s1">'route-segment'</span><span class="p">,</span> <span class="s1">'view-segment'</span><span class="p">]);</span>
</pre></div>

<p><code>$routeSegment</code> is meant to be used instead of built-in Angular <code>$route</code> service. Its provider exposes configuration methods which can be used to traverse the tree of route segments and setup it properly.</p>

<div class="highlight"><pre>
<span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$routeSegmentProvider</span><span class="p">)</span> <span class="p">{</span>

<span class="nx">$routeSegmentProvider</span><span class="p">.</span>

    <span class="nx">when</span><span class="p">(</span><span class="s1">'/section1'</span><span class="p">,</span>          <span class="s1">'s1.home'</span><span class="p">).</span>
    <span class="nx">when</span><span class="p">(</span><span class="s1">'/section1/prefs'</span><span class="p">,</span>    <span class="s1">'s1.prefs'</span><span class="p">).</span>
    <span class="nx">when</span><span class="p">(</span><span class="s1">'/section1/:id'</span><span class="p">,</span>      <span class="s1">'s1.itemInfo.overview'</span><span class="p">).</span>
    <span class="nx">when</span><span class="p">(</span><span class="s1">'/section1/:id/edit'</span><span class="p">,</span> <span class="s1">'s1.itemInfo.edit'</span><span class="p">).</span>
    <span class="nx">when</span><span class="p">(</span><span class="s1">'/section2'</span><span class="p">,</span>          <span class="s1">'s2'</span><span class="p">).</span>

    <span class="nx">segment</span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1.html'</span><span class="p">,</span>
        <span class="nx">controller</span><span class="o">:</span> <span class="nx">MainCtrl</span><span class="p">}).</span>

    <span class="nx">within</span><span class="p">().</span>

        <span class="nx">segment</span><span class="p">(</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/home.html'</span><span class="p">}).</span>

        <span class="nx">segment</span><span class="p">(</span><span class="s1">'itemInfo'</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/item.html'</span><span class="p">,</span>
            <span class="nx">controller</span><span class="o">:</span> <span class="nx">Section1ItemCtrl</span><span class="p">,</span>
            <span class="nx">dependencies</span><span class="o">:</span> <span class="p">[</span><span class="s1">'id'</span><span class="p">]}).</span>

        <span class="nx">within</span><span class="p">().</span>

            <span class="nx">segment</span><span class="p">(</span><span class="s1">'overview'</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/item/overview.html'</span><span class="p">}).</span>

            <span class="nx">segment</span><span class="p">(</span><span class="s1">'edit'</span><span class="p">,</span> <span class="p">{</span>
                 <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/item/edit.html'</span><span class="p">}).</span>

            <span class="nx">up</span><span class="p">().</span>

        <span class="nx">segment</span><span class="p">(</span><span class="s1">'prefs'</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/prefs.html'</span><span class="p">}).</span>

        <span class="nx">up</span><span class="p">().</span>

    <span class="nx">segment</span><span class="p">(</span><span class="s1">'s2'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section2.html'</span><span class="p">,</span>
        <span class="nx">controller</span><span class="o">:</span> <span class="nx">MainCtrl</span><span class="p">});</span>
</pre></div>

<p>Alternatively, you can use this syntax instead of traversing:</p>

<div class="highlight"><pre><span class="nx">$routeSegmentProvider</span><span class="p">.</span><span class="nx">segment</span><span class="p">(</span><span class="s1">'s1'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1.html'</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="nx">MainCtrl</span><span class="p">});</span>

<span class="nx">$routeSegmentProvider</span><span class="p">.</span><span class="nx">within</span><span class="p">(</span><span class="s1">'s1'</span><span class="p">).</span><span class="nx">segment</span><span class="p">(</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/home.html'</span><span class="p">});</span>

<span class="nx">$routeSegmentProvider</span><span class="p">.</span><span class="nx">within</span><span class="p">(</span><span class="s1">'s1'</span><span class="p">).</span><span class="nx">segment</span><span class="p">(</span><span class="s1">'itemInfo'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/section1/item.html'</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="nx">Section1ItemCtrl</span><span class="p">,</span>
    <span class="nx">dependencies</span><span class="o">:</span> <span class="p">[</span><span class="s1">'id'</span><span class="p">]});</span>
</pre></div>

<p>Then, any <code>app-view-segment</code> tags (which are similar to built-in <code>ng-view</code>) in the DOM will be populated with the corresponding route segment item. You must provide a segment index as an argument to this directive to make it aware about which segment level in the tree it should be linked to.</p>

<p><strong>index.html:</strong></p>

<div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">"{active: $routeSegment.startsWith('s1')}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/section1"</span><span class="nt">&gt;</span>Section 1<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">"{active: $routeSegment.startsWith('s2')}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/section2"</span><span class="nt">&gt;</span>Section 2<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"contents"</span> <span class="na">app-view-segment=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>

<p><strong>section1.html:</strong> (it will be loaded to <code>div#contents</code> in <code>index.html</code>)</p>

<div class="highlight"><pre><span class="nt">&lt;h4&gt;</span>Section 1<span class="nt">&lt;/h4&gt;</span>
Section 1 contents.
<span class="nt">&lt;div</span> <span class="na">app-view-segment=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>

<p>...etc. You can reach any nesting level here. Every view will be handled independently, keeping the state of top-level views.</p>

<h2>
<a name="difference-from-ui-router" class="anchor" href="#difference-from-ui-router"><span class="octicon octicon-link"></span></a>Difference from UI-Router</h2>

<p>While it seems that this library has very similar goal to what <a href="https://github.com/angular-ui/ui-router/">UI-Router</a> provides, there are some important differences between their implementations, though.</p>

<p><em>UI-Router</em> implements its own URL routing mechanics with its own "state" concept on top of it. <em>angular-route-segment</em> doesn't try to replace something in AngularJS. It is based on built-in <code>$route</code> engine, so that it tries to extend it rather than to replace. <code>$routeSegmentProvider.when</code> method is just a shorthand to <code>$routeProvider.when</code> with the simplified syntax. Inner segment-handling logic is built on top of events propagated by <code>$route</code> service, with internal usage of some route params from it.</p>

<p>Such approach makes it possible to accomplish the desired nested routing task in more simpler manner, which produces less code, less complexity and potential bugs, provides better cohesion with Angular core engine and is easier to understand, use and debug.</p>

<h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>Please note that you may read the <a href="https://github.com/artch/angular-route-segment/tree/master/test/unit">test specs</a> to learn features usage.</p>

<h3>
<a name="routesegmentprovider-properties" class="anchor" href="#routesegmentprovider-properties"><span class="octicon octicon-link"></span></a>$routeSegmentProvider properties</h3>

<h5>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>options</h5>

<p>A hash object which can be used to set up the service on config stage:</p>

<ul>
<li>
<p><em>options.autoLoadTemplates</em></p>

<p>When true, it will resolve <code>templateUrl</code> automatically via $http service and put its contents into <code>template</code>.</p>
</li>
<li>
<p><em>options.strictMode</em> </p>

<p>When true, all attempts to call <code>within</code> method on non-existing segments will throw an error (you would usually want this behavior in production). When false, it will transparently create new empty segment (can be useful in isolated tests).</p>
</li>
</ul><h5>
<a name="whenroute-name" class="anchor" href="#whenroute-name"><span class="octicon octicon-link"></span></a>when(route, name)</h5>

<p>The shorthand for $routeProvider.when() method with specified fully qualified route name.</p>

<ul>
<li>
<p><em>route</em></p>

<p>Route URL, e.g. <code>/foo/bar</code></p>
</li>
<li>
<p><em>name</em></p>

<p>Fully qualified route name, e.g. <code>foo.bar</code></p>
</li>
</ul><h5>
<a name="segmentname-params" class="anchor" href="#segmentname-params"><span class="octicon octicon-link"></span></a>segment(name, params)</h5>

<p>Adds new segment at current pointer level.</p>

<ul>
<li>
<p><em>name</em></p>

<p>Name of a segment item, e.g. <code>bar</code></p>
</li>
<li>
<p><em>params</em></p>

<p>Segment's parameters hash. The following params are supported:</p>

<ul>
<li>
<code>template</code> provides HTML for the given segment view;</li>
<li>
<code>templateUrl</code> is a template which should be fetched from the network via this URL;</li>
<li>
<code>controller</code> is attached to the given segment view when compiled and linked, this can be any controller definition AngularJS supports;</li>
<li>
<code>controllerAs</code> is a controller alias name, if present the controller will be published to scope under the
controllerAs name;</li>
<li>
<code>dependencies</code> is an array of route param names which are forcing the view to recreate when changed;</li>
<li>
<code>watcher</code> is a $watch-function for recreating the view when its returning value is changed;</li>
<li>
<code>resolve</code> is a hash of functions or injectable names which should be resolved prior to instantiating the template and the controller;</li>
<li>
<code>untilResolved</code> is the alternate set of params (e.g. <code>template</code> and <code>controller</code>) which should be used before resolving is completed; </li>
<li>
<code>resolveFailed</code> is the alternate set of params which should be used if resolving failed.</li>
</ul>
</li>
</ul><h5>
<a name="withinchildname" class="anchor" href="#withinchildname"><span class="octicon octicon-link"></span></a>within(childName)</h5>

<p>Traverses into an existing segment, so that subsequent <code>segment</code> calls will add new segments as its descendants.</p>

<ul>
<li>
<p><em>childName</em> </p>

<p>An existing segment's name. An optional argument. If undefined, then the last added segment is selected.</p>
</li>
</ul><h5>
<a name="up" class="anchor" href="#up"><span class="octicon octicon-link"></span></a>up()</h5>

<p>Traverses up in the tree.</p>

<h5>
<a name="root" class="anchor" href="#root"><span class="octicon octicon-link"></span></a>root()</h5>

<p>Traverses to the root.</p>

<h3>
<a name="routesegment-properties" class="anchor" href="#routesegment-properties"><span class="octicon octicon-link"></span></a>$routeSegment properties</h3>

<h5>
<a name="name" class="anchor" href="#name"><span class="octicon octicon-link"></span></a>name</h5>

<p>Fully qualified name of current active route.</p>

<h5>
<a name="routeparams" class="anchor" href="#routeparams"><span class="octicon octicon-link"></span></a>$routeParams</h5>

<p>A copy of <code>$routeParams</code> in its state of the latest successful segment update. It may be not equal to <code>$routeParams</code>
while some resolving is not completed yet. Should be used instead of original <code>$routeParams</code> in most cases.</p>

<h5>
<a name="chain" class="anchor" href="#chain"><span class="octicon octicon-link"></span></a>chain</h5>

<p>An array of segments splitted by each level separately. Each item contains the following properties:</p>

<ul>
<li>
<code>name</code> is the name of a segment;</li>
<li>
<code>params</code> is the config params hash of a segment;</li>
<li>
<code>locals</code> is a hash which contains resolve results if any;</li>
<li>
<code>reload</code> is a function to reload a segment (restart resolving, reinstantiate a controller, etc)</li>
</ul><h5>
<a name="startswithval" class="anchor" href="#startswithval"><span class="octicon octicon-link"></span></a>startsWith(val)</h5>

<p>Helper method for checking whether current route starts with the given string.</p>

<h5>
<a name="containsval" class="anchor" href="#containsval"><span class="octicon octicon-link"></span></a>contains(val)</h5>

<p>Helper method for checking whether current route contains the given string.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>The MIT License (MIT)</p>

<p>Copyright (c) 2013 Artem Chivchalov</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">angular-route-segment maintained by <a href="https://github.com/artch">artch</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43203231-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
